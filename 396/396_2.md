# 396.2 アクティブディレクトリの名前解決

## Samba4で内蔵DNSを使用する場合

Samba4でADドメインコントローラとして内蔵DNSを使用する場合、DNS参照先として自サーバのループバックアドレスを指定する必要がある。<br>
DNSサーバの指定は、`resolve.conf`ファイルで行う。

* resolve.conf 設定内容

```
nameserver 127.0.0.1
```

## samba-tool dns コマンド

[samba-tool dns](http://www.samba.gr.jp/project/translation/4.6/htmldocs/manpages/samba-tool.8.html#idm139954240384688)

`samba-tool dns`は、Samba内蔵DNSを管理するコマンド

* 書式

```
samba-tool dns <サブコマンド>
```

* サブコマンド

| サブコマンド                                                             | 説明                  |
|:-------------------------------------------------------------------------|:----------------------|
| add <対象サーバ> <ゾーン> <名前> <レコード種別> <データ>                 | DNSレコードを追加     |
| delete <対象サーバ> <ゾーン> <名前> <レコード種別> <データ>              | DNSレコードを削除     |
| query <対象サーバ> <ゾーン> <名前> <レコード種別>                        | データを取得          |
| serverinfo <対象サーバ>                                                  | DNSサーバの情報を表示 |
| update <対象サーバ> <ゾーン> <名前> <レコード種別> <旧データ> <新データ> | DNSレコードを更新     |
| zonecreate <対象サーバ> <ゾーン>                                         | ゾーンを生成          |
| zonedelete <対象サーバ> <ゾーン>                                         | ゾーンを削除          |
| zoneinfo  <対象サーバ> <ゾーン>                                          | ゾーン情報を表示      |
| zonelist <対象サーバ>                                                    | ゾーン一覧を表示      |

## DNSフォワーディング関連の設定パラメータ

| パラメータ    | 値         | 説明                                                           |
|:--------------|:-----------|:---------------------------------------------------------------|
| dns forwarder | IPアドレス | Sambaサーバで名前解決できないDNSリクエストの問い合わせ先を指定 |
